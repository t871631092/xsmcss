(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21007a"],{b5c4:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"height-100p noscroll"},[r("div",{staticClass:"bg-white padding-25 height-100p"},[r("el-divider",{attrs:{"content-position":"left"}},[r("h4",[e._v("个人信息")])]),r("el-row",{attrs:{type:"flex",gutter:10,justify:"center"}},[r("el-col",{attrs:{md:8}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[1==e.user.type?r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.form.student_name,callback:function(t){e.$set(e.form,"student_name",t)},expression:"form.student_name"}})],1):e._e(),1!=e.user.type?r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),1==e.user.type?r("el-form-item",{attrs:{label:"专业"}},[r("el-input",{model:{value:e.form.student_major,callback:function(t){e.$set(e.form,"student_major",t)},expression:"form.student_major"}})],1):e._e(),2==e.user.type?r("el-form-item",{attrs:{label:"级别"}},[r("el-input",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1):e._e(),2==e.user.type?r("el-form-item",{attrs:{label:"类型"}},[r("el-input",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1):e._e(),2==e.user.type?r("el-form-item",{attrs:{label:"系部"}},[r("el-input",{model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1):e._e(),1==e.user.type?r("el-form-item",{attrs:{label:"个人描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.student_description,callback:function(t){e.$set(e.form,"student_description",t)},expression:"form.student_description"}})],1):e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1),r("el-row",{attrs:{type:"flex",gutter:10,justify:"center"}},[r("el-col",{attrs:{md:8}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),r("el-form-item",{attrs:{label:"旧密码",prop:"oldpass"}},[r("el-input",{model:{value:e.ruleForm.oldpass,callback:function(t){e.$set(e.ruleForm,"oldpass",t)},expression:"ruleForm.oldpass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)])},o=[],l={data:function(){var e=this,t=function(e,t,r){""===t?r(new Error("请输入密码")):r()},r=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),s())},s=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.ruleForm.pass?s(new Error("两次输入密码不一致!")):s()};return{form:{name:"",major:"",grade:"",category:"",department:"",description:""},ruleForm:{pass:"",checkPass:"",oldpass:""},rules:{pass:[{validator:r,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}],oldpass:[{validator:t,trigger:"blur"}]}}},computed:{user:function(){return this.$store.state.user}},mounted:function(){this.getData()},methods:{onSubmit:function(){var e=this;this.Post("user/info",e.form,(function(t){t.success?(alert("修改成功"),e.form=t.data[0]):alert("修改失败："+t.msg)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.Post("user/password",{password:t.ruleForm.pass,oldPassword:t.ruleForm.oldpass},(function(e){e.success?alert("修改成功"):alert("失败："+e.msg)}))}))},resetForm:function(e){this.$refs[e].resetFields()},getData:function(){var e=this;this.Get("user/info",{},(function(t){t.success?e.form=t.data[0]:alert("失败："+t.msg)}))}}},a=l,n=r("2877"),u=Object(n["a"])(a,s,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d21007a.5110b987.js.map